
[primary-macro]
recipe = zc.zodbrecipes:server
deployment = required: replace me
pack = required: replace me
shell-script = true
invalidation-queue-size = 1000
shutdown-wait = 300
zeo.conf =
   <zeo>
      address $${:zeo-address}
      monitor-address $${:zeo-monitor-address}
      transaction-timeout 300
      invalidation-queue-size $${:invalidation-queue-size}
   </zeo>
   %import zc.zrs
   <primary 1>
     address $${:zrs-replication-port}
     <filestorage>
        path /home/databases/$${:customer}/$${:database}.fs
     </filestorage>
   </primary>
zdaemon.conf =
   <runner>
     backoff-limit $${:shutdown-wait}
   </runner>

[secondary-macro]
recipe = zc.zodbrecipes:server
deployment = $${:foo}
pack = $${:pack}
shell-script = true
invalidation-queue-size = 1000
shutdown-wait = 300
check-checksums = true
zeo.conf =
   <zeo>
      address $${:zeo-address}
      monitor-address $${:zeo-monitor-address}
      transaction-timeout 300
      invalidation-queue-size $${:invalidation-queue-size}
   </zeo>
   %import zc.zrs
   <secondary 1>
     address $${:primary-server}:$${:zrs-replication-port}
     check_checksums $${:check-checksums}
     <primary>
        address $${:zrs-replication-port}
        <filestorage>
           path $${:database-path}
        </filestorage>
     </primary>
   </secondary>
zdaemon.conf =
   <runner>
     backoff-limit $${:shutdown-wait}
   </runner>


